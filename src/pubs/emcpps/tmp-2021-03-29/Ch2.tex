
\chapter[Conditionally Safe Features]{Conditionally Safe Features}\label{ch-conditional}
\emcppschapterstart{}

PRODUCTION: Material copied from Ch 0; AUs will edit/replace on FPPs. 

AUTHORS: Remember to add material about whether these features are easy to teach. 

The preponderance of new features available in modern C++ has important, frequently occurring, and valuable uses, yet how these features are used appropriately, let alone optimally, might not be obvious. Whatâ€™s more, some of these features are fraught with inherent dangers and deficiencies, requiring explicit training and extra care to circumnavigate their pitfalls.

For example, we deem default member initializers a \emph{conditionally safe} feature because, although they are easy to use per se, the perhaps less-than-obvious unintended consequences of doing so (e.g., tight compile-time coupling) might be prohibitively costly in certain circumstances (e.g., might prevent relink-only patching in production).

%%%%%%%%%%%%%%% C++11
\stepcounter{cppxx}
\addtocontents{toc}{\protect\renewcommand*\protect\cftsecindent{1.25em}}
\cftaddnumtitleline{toc}{section}{\thechapter.\thecppxx}{C++11}{\thepage}
% to add to the TOC at the section level
\renewcommand{\cppxx}{C++11}
%%%%%  

\newpage
\addtocontents{toc}{\protect\renewcommand*\protect\cftsecindent{4.5em}}
%\section[{\tt alignas}~]{The {\SecCode alignas} Decorator}\label{alignas}
\input{alignas-josh}

\newpage
%\section[{\tt alignof}]{The (Compile-Time) {\SecCode alignof} Operator}\label{alignof}
\input{alignof}

\newpage
%\cftaddtitleline{toc}{section}{\protect\hspace*{-5em}\framebox{\sffamily\itshape\cppxx}\vspace*{-3ex}}{}
% \section[{\tt auto}]{{\SecCode auto}\checkoddpage\Cbox}\label{auto-feature}
%\input{auto-placeholder}
%\cftaddtitleline{toc}{section}{\protect\hspace*{-5em}\framebox{\sffamily\itshape\cppxx}\vspace*{-3ex}}{}
%\section[{\tt auto} Variables]{Variables of Automatically Deduced Type}\label{auto}\label{auto-feature}
\input{auto-josh}

\newpage
 %\section[Braced Init]{Brace-Initialization Syntax: {\SecCode \{\}}}\label{bracedinit}
\input{bracedinit}

\newpage
%\section[{\tt constexpr} Functions]{Compile-Time Evaluatable Functions}\label{constexprfunc}
\input{constexprfunc-placeholder}

\newpage
%\section[{\tt constexpr} Variables]{Compile-Time Accessible Variables}\label{constexprvar}
\input{constexprvar-josh}

\newpage
%\section[Default Member Init]{Default {\SecCode class}/{\SecCode union} Member Initializers}\label{Default-Member-Initializers}
\input{defmemberinit-placeholder}

\newpage
%\section[{\tt enum} {\tt class}]{Strongly Typed Scoped Enumerations}\label{enumclass}
\input{enumclass-josh}

\newpage
%\section[{\tt extern} {\tt template}]{Explicit Instantiation Declarations}\label{explicit-template-instantiations}
\input{externtemplate-josh} 

\newpage
%\section[Forwarding References]{Forwarding {\SecCode \&\&} References}\label{forwardingref}\label{forwarding-references}
\input{forwardingref-josh}

\newpage
%\section[Generalized PODs]{Generalized Plain Old Data Types}%\label{}
\input{gpods-placeholder} 

\newpage
%\section[Inheriting Ctors]{Inheriting Base Class Constructors}\label{ctorinheriting}\label{inheriting-constructors}
\input{inheritingctor-josh}

\newpage
%\section[{\tt initializer\_list}]{List Initialization: {\SecCode std::initializer\_list<T>}}%\label{}
\input{initlist-placeholder}

\newpage
%\section[Lambdas]{Unnamed Local Function Objects (Closures)}\label{lambda}
\input{lambda-josh2}

\newpage
%\section[{\tt noexcept} Operator]{The {\SecCode noexcept} Operator}%\label{noexcept}
\input{noexcept-operator-placeholder}

\newpage
%\section[Opaque {\tt enum}s]{Opaque Enumeration Declarations}\label{enumopaque}\label{opaque-enumeration-declarations}
\input{opaqueenum-josh}

\newpage
%\section[Range {\tt for}]{Range-Based {\SecCode for} Loops}%\label{}
\input{rangefor-josh}

\newpage
%\section[{\itshape rvalue} References]{Rvalue References: {\SecCode \&\&}}\label{Rvalue-References}
\input{rvalueref-placeholder}

\newpage
%\section[Underlying Type '11]{Explicit Enumeration Underlying Type}\label{explicit-enumeration-underlying-type}
\input{underlyingenum-josh}

\newpage
%\section[User-Defined Literals]{User-Defined Literal Operators}%\label{}
\input{userdeflit-josh}

\newpage
%\section[Variadic Templates]{Variable-Argument-Count Templates}\label{variadictemplate}
\input{variadictemplate-placeholder}


%%%%%%%%%%%%%%% C++14
\stepcounter{cppxx}
\addtocontents{toc}{\protect\renewcommand*\protect\cftsecindent{1.25em}}
\cftaddnumtitleline{toc}{section}{\thechapter.\thecppxx}{C++14}{\thepage}
% to add to the TOC at the section level
\renewcommand{\cppxx}{C++14}


\newpage
\addtocontents{toc}{\protect\renewcommand*\protect\cftsecindent{4.5em}}
%\section[{\tt constexpr} Functions '14]{Relaxed Restrictions on {\SecCode constexpr} Functions}\label{relaxed-constexpr-restrictions}%\sectionmark{Relaxed {\RHCode constexpr} Restrictions}
\input{relaxedconstexpr-josh}

\newpage
%\section[{\itshape Generic} Lambdas]{Lambdas Having a Templated Call Operator}\label{genericlambda}
\input{genericlambda-placeholder}


\newpage
%\section[Lambda Captures]{Lambda-Capture Expressions}\label{lambda-capture-expressions}
\input{lambdacapture-josh}





%%%%%%%%%%%%%%%% MATERIAL FOR DESIGN TESTING
%\newpage
%\addtocontents{toc}{\protect\renewcommand*\protect\cftsecindent{4.5em}}
%\section[Short Title]{Longer Wordier Title for Test}\label{justfortest}
%
%Section text; just to test where/how the C++ change (from C++11 to C++14) in the RH must be placed in relation to sectioning commands such that the correct one displays
%
%\begin{table}[h!] 
%\begin{center}
%\begin{threeparttable}
%\caption{Testing Table Numbering}\label{test-table3}\vspace{1.5ex} 
%{\small \begin{tabular}{c|c|c}\thickhline 
%\rowcolor[gray]{.9}   {\sffamily\bfseries Compiler} & {\sffamily\bfseries Compiler-Specific} &
%{\sffamily\bfseries Standard-Conforming} \\ \hline 
%GCC &\texttt{\_\_attribute\_\_((pure))} & \texttt{[[gnu::pure]]} \\ \hline
%Clang & \texttt{\_\_attribute\_\_((no\_sanitize))} &\texttt{[[clang::no\_sanitize]]} \\ \hline 
%MSVC & \texttt{declspec(deprecated)} & \texttt{[[deprecated]]} \\ \thickhline
%\end{tabular}
%}
%\end{threeparttable} 
%\end{center}
%\end{table}
%
%Donec mattis, ex a ornare auctor, tortor felis pulvinar odio, eu mollis tortor orci id ligula. Vestibulum dignissim magna vitae lectus cursus, ac sollicitudin mi pulvinar. Praesent vulputate lorem lectus, eu pulvinar mi finibus eu. Donec sit amet massa massa. Sed eget molestie quam.\footnote{testing a footnote} Praesent iaculis diam ut nunc condimentum auctor. Morbi porttitor varius ante vel venenatis. Integer ut porttitor elit, id lacinia turpis. Integer id iaculis ante, placerat ornare tortor. Sed et consectetur est, sit amet rhoncus turpis.
%
%\begin{table}[h!] 
%\begin{center}
%\begin{threeparttable}
%\caption{Testing Table Numbering}\label{test-table4}\vspace{1.5ex} 
%{\small \begin{tabular}{c|c|c}\thickhline 
%\rowcolor[gray]{.9}   {\sffamily\bfseries Compiler} & {\sffamily\bfseries Compiler-Specific} &
%{\sffamily\bfseries Standard-Conforming} \\ \hline 
%GCC &\texttt{\_\_attribute\_\_((pure))} & \texttt{[[gnu::pure]]} \\ \hline
%Clang & \texttt{\_\_attribute\_\_((no\_sanitize))} &\texttt{[[clang::no\_sanitize]]} \\ \hline 
%MSVC & \texttt{declspec(deprecated)} & \texttt{[[deprecated]]} \\ \thickhline
%\end{tabular}
%}
%\end{threeparttable} 
%\end{center}
%\end{table}
%
%This feature, when used in conjunction with \emph{explicit instantiation
%definitions}, can significantly improve compilation times for a set of
%translation units that often instantiate common templates:
%
%\noindent\begin{minipage}{.45\textwidth}
%\begin{lstlisting}[language=C++, caption=code 1,frame=tb]{Name}
%void code()
%{
%
%}
%\end{lstlisting}
%\end{minipage}\hfill
%\begin{minipage}{.45\textwidth}
%\begin{lstlisting}[language=C++, caption=code 2,frame=tb]{Name}
%void code()
%{
%
%}
%\end{lstlisting}
%\end{minipage}
%
%Nullam nibh tortor, finibus ut lectus eu, convallis vehicula libero. Cras maximus ligula nisl, a eleifend mauris venenatis nec. Suspendisse potenti. Maecenas viverra laoreet mauris ut laoreet. Donec non felis risus. Ut faucibus, justo id luctus lobortis, nisi lacus pharetra est, id pretium arcu ligula ac magna. Morbi a nisl sit amet lacus vehicula tempor nec sit amet nibh. 
%
%\noindent\begin{minipage}{.45\textwidth}
%\begin{lstlisting}[language=C++, caption=code 1 with a long and wrapping title,frame=tb]{Name}
%void code()
%{
%
%}
%\end{lstlisting}
%\end{minipage}\hfill
%\begin{minipage}{.45\textwidth}
%\begin{lstlisting}[language=C++, caption=code 2 with a long and wrapping title,frame=tb]{Name}
%void code()
%{
%
%}
%\end{lstlisting}
%\end{minipage}
%
%Pellentesque id lorem ac sem ullamcorper semper. Donec imperdiet sapien in nisi faucibus, et tempus lacus hendrerit. Nulla laoreet risus eu tortor ultrices, sed bibendum neque sodales. Ut faucibus ipsum id convallis convallis. Vivamus vehicula rutrum metus in semper. Morbi fringilla ex vel vulputate vehicula. Maecenas ut porttitor massa.
%




