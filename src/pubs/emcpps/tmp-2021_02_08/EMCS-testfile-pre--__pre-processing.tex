%!TEX TS-program = xelatex 
%!TEX encoding = UTF-8 Unicode






% Options for packages loaded elsewhere
% \PassOptionsToPackage{unicode}{hyperref}
% \PassOptionsToPackage{hyphens}{url}


%

% \documentclass[
% % % % % % ]{report}

% PEARSON
\documentclass[twoside,10pt,letterpaper,usenames]{newstyle-PearsonGeneric-7-38-ROMEO}
\usepackage[twoside]{geometry} % to set the dimensions of the page

% PEARSON
\geometry{                                  % setting all the necessary dimensions...
paperwidth=7.375in,                  % Do not change these settings.
paperheight=9.125in,                 % These set up the trim size for the book.
lmargin=1in,
rmargin=.875in,
% bmargin=.650in,  %% to allow space for the drop folio
bmargin=.9in,
tmargin=.95in,
width=5.5in,
% height=7.4in,  %% stealing space for the drop folio
height=7.15in,
marginparwidth=0in,
marginparsep=0in,
headheight=0.2in,
headsep=.25in,
footskip=.025in}





% PEARSON
%%%%%%%% Skip over this part.  These lines should remain unaltered.
%
%%    These lines input packages that are used for this template.
\usepackage[letter,cam,center]{crop-AlteredCamMarks-Romeo}  % to add trim marks; updated Nov 2015 to allow more space between marks and trim edge
\usepackage{graphicx} % for graphics layout

%%%%%%%%%%%%%%%%% ROMEO- Running Heads
% Set up RHs for frontmatter and Ch0; they will have to be altered again for Chs 1-3 and then revert to this again for Ch4
\usepackage{fancyhdr}
\usepackage{extramarks}
\newcommand{\cppxx}{C++xx}
\newcounter{cppxx}[chapter]
\pagestyle{fancy}
% for fancy pages, i.e., most pages
\rfoot[\fancyplain{}{\hspace{\fill}\\ \sfnine\thepage\hfill}]{\fancyplain{\hspace{\fill}\\ \sfnine\thepage}{\hspace{\fill}\\ \sfnine\thepage}}
\lfoot[\fancyplain{\bf\thepage}{}]{\fancyplain{}{}}
\cfoot[\fancyplain{}{}]{\fancyplain{}{}}
%\renewcommand{\sectionmark}[1]{\markright{{\sfnine\thesection\ #1}}}
%\renewcommand{\sectionmark}[1]{\markright{{\sfnine\ #1}}} % to remove section number
\renewcommand{\sectionmark}[1]{\markright{{\sfRHRomeo #1}}} % to remove section number 
%% ROMEO - making feature short title larger and bolder
%\renewcommand{\chaptermark}[1]{\markboth{{\sfb Chapter~\thechapter\quad {\sfb #1}}}{}}
\renewcommand{\chaptermark}[1]{\markboth{{\sfelevenRomeo Chapter~\thechapter\quad {\sfelevenRomeo #1}}}{}}
\renewcommand{\headrulewidth}{0pt}
%\renewcommand{\chaptersmark}[1]{\markboth{}{\sfb #1}}
\renewcommand{\chaptersmark}[1]{\markboth{}{\sfRHRomeo #1}}
% for plain pages, like chapter openers
\fancypagestyle{plain}{%
\fancyhf{} % clear all header and footer fields
\fancyfoot[RO]{\hspace*{\fill}\\\sfnine{\thepage}} 
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
}






%%%% CHANGED FOR ROMEO
% Changing code font to Cousine
\usepackage{mathspec}
\setmonofont[Ligatures=NoCommon,Scale=.85,SlantedFont={Cousine Italic},BoldFont={Cousine Bold},BoldSlantedFont={Cousine Bold Italic}]{Cousine Regular} % to set our code font
\newfontface{\SecCode}[Ligatures=NoCommon,Scale=1.3]{Cousine Bold}
%\newfontface{\SecCode}[Ligatures=NoCommon,Scale=1.105]{Cousine Bold}
\newfontface{\SubsecCode}[Ligatures=NoCommon,Scale=1.2]{Cousine Bold}
%\newfontface{\SubsecCode}[Ligatures=NoCommon,Scale=1.02]{Cousine Bold}
\newfontface{\SubsubsecCode}[Ligatures=NoCommon,Scale=1]{Cousine Bold}
%\newfontface{\SubsubsecCode}[Ligatures=NoCommon,Scale=.935]{Cousine Bold}
\newfontface{\ParaCode}[Ligatures=NoCommon,Scale=.9]{Cousine Bold}
\newfontface{\SubparaCode}[Ligatures=NoCommon,Scale=.9]{Cousine Regular}
%\newfontface{\RHCode}[Ligatures=NoCommon,Scale=.81]{Cousine Regular}
%\newfontface{\RHCode}[Ligatures=NoCommon,Scale=.85]{Cousine Bold}
%\newfontface{\RHCode}[Ligatures=NoCommon,Scale=1.17]{Cousine Bold} % set at scaled .9 of 13pts
\newfontface{\RHCode}[Ligatures=NoCommon,Scale=1.35]{Cousine Bold} % set at scaled .9 of 15pts
%\newfontface{\RHCode}[Ligatures=NoCommon,Scale=1.53]{Cousine Bold} % set at scaled .9 of 17pts
%\newfontface{\RHCode}[Ligatures=NoCommon,Scale=1.71]{Cousine Bold} % set at scaled .9 of 19pts
\newfontface{\RHCodeEleven}[Ligatures=NoCommon,Scale=.935]{Cousine Bold}
%\newfontface{\RHCodeTwelve}[Ligatures=NoCommon,Scale=1.02]{Cousine Bold}
\newfontface{\RHCodeTwelve}[Ligatures=NoCommon,Scale=1.1]{Cousine Bold}
%\newfontface{\TOCCode}[Ligatures=NoCommon,Scale=.85]{Cousine Bold}
%\newfontface{\TOCCode}[Ligatures=NoCommon,Scale=1.105]{Cousine Bold} % set at scaled .85 of 13pts
%\newfontface{\TOCCode}[Ligatures=NoCommon,Scale=1.0625]{Cousine Bold} % set at scaled .85 of 12.5pts
\newfontface{\TOCCode}[Ligatures=NoCommon,Scale=1.02]{Cousine Bold} % set at scaled .85 of 12pts
%\newfontface{\TOCCode}[Ligatures=NoCommon,Scale=.9]{Cousine Bold}
\newfontface{\TOCCodeR}[Ligatures=NoCommon,Scale=.85]{Cousine Regular}
\newfontface{\TOCCodeEleven}[Ligatures=NoCommon,Scale=.935]{Cousine Regular}
\newfontface{\TOCCodeElevenB}[Ligatures=NoCommon,Scale=.935]{Cousine Bold}
%\newfontface{\TOCCodeElevenB}[Ligatures=NoCommon,Scale=1.1]{Cousine Bold}
\newfontface{\TOCCodeTwelve}[Ligatures=NoCommon,Scale=1.02]{Cousine Regular}
\newfontface{\TOCCodeThirteen}[Ligatures=NoCommon,Scale=1.105]{Cousine Regular}

% Changing sans serif font to Gill Sans Nova
\setsansfont[Ligatures=Common,Scale=1,SlantedFont={Gill Sans Nova Medium Italic},BoldFont={Gill Sans Nova Bold},BoldSlantedFont={Gill Sans Nova Bold Italic}]{Gill Sans Nova Medium} % to set our sans font
%%
\newfontface{\sfbHugeRomeo}[Ligatures=Common,Scale=2.5]{Gill Sans Nova Bold}
\newfontface{\cmssbxparttocRomeo}[Ligatures=Common,Scale=1.2]{Gill Sans Nova Bold}
\newfontface{\cmssbxsectionRomeo}[Ligatures=Common,Scale=1.4]{Gill Sans Nova Bold}
\newfontface{\cmssbxelevenRomeo}[Ligatures=Common,Scale=1.1]{Gill Sans Nova Bold}
\newfontface{\cmssbxchaptocRomeo}[Ligatures=Common,Scale=1]{Gill Sans Nova Bold}
\newfontface{\cmssbxchaptitleRomeo}[Ligatures=Common,Scale=3.0]{Gill Sans Nova Bold}
\newfontface{\cmsschapnameRomeo}[Ligatures=Common,Scale=2.6]{Gill Sans Nova Medium}
\newfontface{\cmssbxpartRomeo}[Ligatures=Common,Scale=4.4]{Gill Sans Nova Bold}
\newfontface{\cmssparttitleRomeo}[Ligatures=Common,Scale=3.4]{Gill Sans Nova Medium}
\newfontface{\sfiHuge}[Ligatures=Common,Scale=2.5]{Gill Sans Nova Medium Italic}
\newfontface{\sfititleRomeo}[Ligatures=Common,Scale=2.4]{Gill Sans Nova Medium Italic}
\newfontface{\sfihalftitleRomeo}[Ligatures=Common,Scale=2.0]{Gill Sans Nova Medium Italic}
\newfontface{\sfiauthorRomeo}[Ligatures=Common,Scale=1.6]{Gill Sans Nova Medium Italic}
\newfontface{\sfblargeRomeo}[Ligatures=Common,Scale=1.2]{Gill Sans Nova Bold}
\newfontface{\sfbelevenRomeo}[Ligatures=Common,Scale=1.1]{Gill Sans Nova Bold}
\newfontface{\sfelevenRomeo}[Ligatures=Common,Scale=1.1]{Gill Sans Nova Medium}
\newfontface{\sftwelveRomeo}[Ligatures=Common,Scale=1.2]{Gill Sans Nova Medium}
\newfontface{\sftwelvefiveRomeo}[Ligatures=Common,Scale=1.25]{Gill Sans Nova Medium}
\newfontface{\sfthirteenRomeo}[Ligatures=Common,Scale=1.3]{Gill Sans Nova Medium}
\newfontface{\sfbRomeo}[Ligatures=Common,Scale=1]{Gill Sans Nova Bold}
\newfontface{\sfbiRomeo}[Ligatures=Common,Scale=1]{Gill Sans Nova Bold Italic}
\newfontface{\sfeightRomeo}[Ligatures=Common,Scale=.8]{Gill Sans Nova Medium}
\newfontface{\sfnineRomeo}[Ligatures=Common,Scale=.9]{Gill Sans Nova Medium}
\newfontface{\sfbnineRomeo}[Ligatures=Common,Scale=.9]{Gill Sans Nova Bold}
\newfontface{\defnemRomeo}[Ligatures=Common,Scale=1]{Gill Sans Nova Bold}
\newfontface{\sfbitwelveRomeo}[Ligatures=Common,Scale=1.2]{Gill Sans Nova Bold Italic}
%%%%%
\newfontface{\sfbsectionRomeo}[Ligatures=Common,Scale=1.3]{Gill Sans Nova Bold}
\newfontface{\sfbsectionitalRomeo}[Ligatures=Common,Scale=1.4]{Gill Sans Nova Bold Italic}
\newfontface{\sfbsubsecRomeo}[Ligatures=Common,Scale=1.2]{Gill Sans Nova Bold}
\newfontface{\sfbsubsubRomeo}[Ligatures=Common,Scale=1.1]{Gill Sans Nova Bold}
\newfontface{\sfbparaRomeo}[Ligatures=Common,Scale=1]{Gill Sans Nova Bold}
\newfontface{\sfbsubsecitalRomeo}[Ligatures=Common,Scale=1.2]{Gill Sans Nova Bold Italic}
\newfontface{\sfbsubsubsecitalRomeo}[Ligatures=Common,Scale=1.1]{Gill Sans Nova Bold Italic}
%%%
% scaled at 13pts
%\newfontface{\sfbiRHRomeo}[Ligatures=Common,Scale=1.3]{Gill Sans Nova Bold Italic}
%\newfontface{\sfiRHRomeo}[Ligatures=Common,Scale=1.3]{Gill Sans Nova Medium Italic}
%\newfontface{\sfRHRomeo}[Ligatures=Common,Scale=1.3]{Gill Sans Nova Medium}
% scaled at 15pts
\newfontface{\sfbiRHRomeo}[Ligatures=Common,Scale=1.5]{Gill Sans Nova Bold Italic}
\newfontface{\sfiRHRomeo}[Ligatures=Common,Scale=1.5]{Gill Sans Nova Medium Italic}
\newfontface{\sfRHRomeo}[Ligatures=Common,Scale=1.5]{Gill Sans Nova Medium}
%%%%%
% scaled at 17pts
%\newfontface{\sfbiRHRomeo}[Ligatures=Common,Scale=1.7]{Gill Sans Nova Bold Italic}
%\newfontface{\sfiRHRomeo}[Ligatures=Common,Scale=1.7]{Gill Sans Nova Medium Italic}
%\newfontface{\sfRHRomeo}[Ligatures=Common,Scale=1.7]{Gill Sans Nova Medium}
%%%%%% 
%% scaled at 19pts
%\newfontface{\sfbiRHRomeo}[Ligatures=Common,Scale=1.9]{Gill Sans Nova Bold Italic}
%\newfontface{\sfiRHRomeo}[Ligatures=Common,Scale=1.9]{Gill Sans Nova Medium Italic}
%\newfontface{\sfRHRomeo}[Ligatures=Common,Scale=1.9]{Gill Sans Nova Medium}


%% redefining existing sans serif font commands
\renewcommand{\sfbHuge}{\sfbHugeRomeo}       
\renewcommand{\cmssbxparttoc}{\cmssbxparttocRomeo}
\renewcommand{\cmssbxsection}{\cmssbxsectionRomeo}
\renewcommand{\cmssbxeleven}{\cmssbxelevenRomeo}
\renewcommand{\cmssbxchaptoc}{\cmssbxchaptocRomeo}    
\renewcommand{\cmssbxchaptitle}{\cmssbxchaptitleRomeo}
\renewcommand{\cmsschapname}{\cmsschapnameRomeo}
\renewcommand{\cmssbxpart}{\cmssbxpartRomeo}
\renewcommand{\cmssparttitle}{\cmssparttitleRomeo} 
\renewcommand{\sfiHuge}{\sfiHugeRomeo}
\renewcommand{\sfititle}{\sfititleRomeo}
\renewcommand{\sfihalftitle}{\sfihalftitleRomeo} 
\renewcommand{\sfiauthor}{\sfiauthorRomeo} 
\renewcommand{\sfblarge}{\sfblargeRomeo} 
\renewcommand{\sfbeleven}{\sfbelevenRomeo}  
\renewcommand{\sfb}{\sfbRomeo} 
\renewcommand{\sfeight}{\sfeightRomeo}
\renewcommand{\sfnine}{\sfnineRomeo}
\renewcommand{\defnem}{\defnemRomeo}                  
%%%%
\renewcommand{\sfbsection}{\sfbsectionRomeo}
\renewcommand{\sfbsubsec}{\sfbsubsecRomeo}
\renewcommand{\sfbsubsub}{\sfbsubsubRomeo}
\renewcommand{\sfbpara}{\sfbparaRomeo}


%%%%%%% strikeout text function
\usepackage[normalem]{ulem}  % used for a meredith citation
%%%%%%%%%%%%%%

%%%%%%%%%% getting picky about hyphenation
\hyphenation{name-space}
%%%%%%%%%%%%%

\newcommand\subsubemdash{\sfbsubsubRomeo\char"2014} %% for whatever reason, emdashes are not displaying properly in subsubsection heads. This creates a direct command to create them. 

\newcommand\romeovalue[1]{\textit{#1}}  % for normal text usage
\newcommand\romeovalueinside{\itshape} % for inside other environments, like table cells
\newcommand\romeogloss[1]{\textbf{#1}}
\newcommand\intraref[2]{\textit{\titleref{#1}~\intrarefdelim~\titleref{#2}} on page~\pageref{#2}}
\newcommand\intrarefsimple[1]{\textit{\titleref{#1}} on page~\pageref{#1}}
\newcommand\seealsoref[2]{``\titleref{#1}"~({#2}, p.~\pageref{#1})~\seealsodelim~}
\newcommand\featureref[2]{{#1}.``\titleref{#2}" on page~\pageref{#2}}
\newcommand{\intrarefdelim}{---}
\newcommand{\seealsodelim}{~$\blacklozenge$~}
\usepackage{ifthen}

\usepackage{cite}
%%%%%%%%%%%%%%%%% to set citations and biblabels bold 
\makeatletter
\renewcommand\@cite[2]{%
{\bfseries #1}}\ifthenelse{\boolean{@tempswa}}{,\nolinebreak[3] #2}{}
%\makeatletter
\renewcommand\@biblabel[1]{\hspace*{7pt}\MakeLowercase{\bfseries #1}}  % sets bib label citations are bold
\makeatother
%%%%%%%%%%%%%%%%

% Because the cppxx in the RH takes the moniker of "section" per the Au's requirement even though the Au requires that it not exist on the page and because each "feature" is a section and is unnumbered and because the Au decided when the design was almost complete that a section xref was needed for each feature, these manual commands will take the place of a working \ref for each cppxx fake section. Readdress this for the second edition and come up with a better solution; that will probably involve redefining the section command, so cppxx can be an actual section, or creating a new section-like environment for cppxx.   
\newcommand{\locationa}{Section~1.1}
\newcommand{\locationb}{Section~1.2}
\newcommand{\locationc}{Section~2.1}
\newcommand{\locationd}{Section~2.2}
\newcommand{\locatione}{Section~3.1}
\newcommand{\locationf}{Section~3.2}


%%%%%%%%%%CHANGED FOR ROMEO
\setcounter{secnumdepth}{0}




%%% LORI
\usepackage{cprotect}

\usepackage{amsfonts} % to ensure attractive mathematics
\usepackage{amssymb} % to ensure attractive mathematics
\usepackage{float}      % to allow things to float even if they normally don't
\usepackage{wrapfig} % to allow text to wrap around small figures
\usepackage{outline} % to allow outline creation
\usepackage{framed-PearsonGeneric} % to create the leftside vertical bar for the example environment

\usepackage{listings}  % for setting attractive computer code



%\definecolor{maroon}{cmyk}{.26,1,.63,.17}
%\definecolor{skyblue}{cmyk}{1,.69,0,0}  %% sky blue is now bright blue
%\definecolor{forestgreen}{cmyk}{.9,0,.9,0}
%\definecolor{mustard}{cmyk}{.0,.45,1,0}  %% mustard is now really orange
%\definecolor{purple}{cmyk}{.83,.81,0,0}
%\definecolor{codegray}{cmyk}{0,0,0,.5}  %% based on bright blue, not black 

%%%%% CHANGED FOR ROMEO
% changed font to Cousine, changed to 2ex indent

%% PRINT BOOK SETTINGS  % PRINT BOOK AND EBOOK WILL BE SET THE SAME
%\usepackage[xetex]{color}
%\usepackage{everypage-1x}
\usepackage{xespotcolor-Romeo}
\NewSpotColorSpace{PANTONE}
\AddSpotColor     {PANTONE}  {PANTONE661PC} {PANTONE\SpotSpace 661\SpotSpace PC} {1 0 0.05 0.72}
\SetPageColorSpace{PANTONE}
\definecolor{PANTONE661PC}  {spotcolor} {PANTONE661PC,1.0}
\definecolor{PANTONE661PCA} {spotcolor} {PANTONE661PC,0.5}
\definecolor{grey}           {gray}      {0.5}
\definecolor{grey}           {gray}      {0.5}


\makeatletter
\lstdefinestyle{Romeo}{
language=C++,
 framerule=0.5pt,
    keywordstyle={\ttfamily\bfseries},
    commentstyle={\color{PANTONE661PCA}\ttfamily},
    xleftmargin=2ex,
    escapeinside={(ù}{ù)},
    showstringspaces=false, 
  basicstyle=\ttfamily%
   \lst@ifdisplaystyle\small\fi
 }
\makeatother

\lstset{style=Romeo}
%{
%language=C++,
% framerule=0.5pt,
%    keywordstyle={\ttfamily\bfseries},
%    commentstyle={\color{PANTONE661PCA}\ttfamily},
%    xleftmargin=2ex,
%    escapeinside={(ù}{ù)},
%    showstringspaces=false, 
%}

%\lstset{style=Romeo,language=C++,
%basicstyle=\ttfamily\small,framerule=0.5pt,
%%emph=[1]{const},
%%  emphstyle=[1]{\color{PANTONE661PC}\ttfamily},
%%  moreemph=[2]{int,void,char},
%%  emphstyle=[2]{\color{PANTONE661PC}\ttfamily},
%%    moreemph=[3]{decltype},
%%      emphstyle=[3]{\color{PANTONE661PC}\ttfamily},
%%    keywordstyle={\color{PANTONE661PC}\ttfamily\bfseries},
%        keywordstyle={\ttfamily\bfseries},
%%  stringstyle={\color{PANTONE661PC}},
%%commentstyle={\color{PANTONE661PCA}\itshape},
%%commentstyle={\color{PANTONE661PCA}\itshape},
%commentstyle={\color{PANTONE661PCA}\ttfamily},
%%numberstyle=\color{PANTONE661PC},
%xleftmargin=2ex,
%    escapeinside={(ù}{ù)},
%    showstringspaces=false, 
%} % setting the code in small sans serif font and setting the margin for the code.  Nov 2015: setting the rules to be 0.5pt
%%%%%%%%%%%%
\newcommand{\codeincomments}{\color{PANTONE661PCA}\ttfamily}
\newcommand{\keyincomments}{\color{PANTONE661PCA}\ttfamily\bfseries}
\newcommand{\emphincomments}{\color{PANTONE661PCA}\ttfamily\itshape}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\lstdefinestyle{plain}{basicstyle=\ttfamily\small,framerule=0.5pt,
%emph=[1]{const},
%  emphstyle=[1]{\ttfamily},
%  moreemph=[2]{int,void,char},
%  emphstyle=[2]{\ttfamily},
%    moreemph=[3]{decltype},
%      emphstyle=[3]{\ttfamily},
    keywordstyle={\ttfamily},
%  stringstyle={},
commentstyle={\color{grey}\ttfamily},
%numberstyle={},
xleftmargin=2ex,
    escapeinside={(ù}{ù)},
    showstringspaces=false, 
}  

\lstdefinestyle{footcode}{language=C++,
basicstyle=\ttfamily\footnotesize,framerule=0.5pt,
keywordstyle={\ttfamily\bfseries\footnotesize},
commentstyle={\color{grey}\ttfamily},
xleftmargin=2ex,
escapeinside={(ù}{ù)},
showstringspaces=false, 
}  
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\fncodeincomments}{\color{grey}\ttfamily}
\newcommand{\fnkeyincomments}{\color{grey}\ttfamily\bfseries}
%%%%%%%%%%%%%%%%%


%%% EBOOK SETTINGS
%\lstset{language=C++,basicstyle=\ttfamily\small,framerule=0.5pt,
%emph=[1]{const},
%  emphstyle=[1]{\color{mustard}\ttfamily},
%  moreemph=[2]{int,void,char},
%  emphstyle=[2]{\color{maroon}\ttfamily},
%    moreemph=[3]{decltype},
%      emphstyle=[3]{\color{forestgreen}\ttfamily},
%    keywordstyle={\color{forestgreen}\ttfamily\bfseries},
%  stringstyle={\color{purple}},
%commentstyle={\color{codegray}\itshape},
%numberstyle=\color{purple},
%xleftmargin=2ex,
%    escapeinside={(ù}{ù)},
%    showstringspaces=false, 
%} %%%% setting the code in small sans serif font and
%%% setting the margin for the code.  Nov 2015: setting the rules to be 0.5pt
%
%\lstdefinestyle{plain}{basicstyle=\ttfamily\small,framerule=0.5pt,xleftmargin=2ex,
%emph=[1]{const},
%  emphstyle=[1]{\ttfamily},
%  moreemph=[2]{int,void,char},
%  emphstyle=[2]{\ttfamily},
%    moreemph=[3]{decltype},
%      emphstyle=[3]{\ttfamily},
%    keywordstyle={\ttfamily},
%  stringstyle={},
%commentstyle={\ttfamily},
%numberstyle={},
%    escapeinside={(ù}{ù)},
%    showstringspaces=false, 
%}
%
%%%%%%%%%%%%%%%%
%\newcommand{\codeincomments}{\color{codegray}\ttfamily}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%%%%%%%%%%%%%%%%%%

\newcommand{\authorsnote}{Authors' Note: }
%\newcommand{\intraref}[1]{{\textit{#1}}}
\newcommand{\intrarefsub}[1]{\textit{#1}}  % needed for V's markdown conversion


\usepackage[stable,bottom]{footmisc} % to stabilize the footnote environment and to ensure footnotes
							  % appear at the bottom of the page, even if a figure or table
							  % appears at the bottom  


%\renewcommand{\thetable}{\thesection.\arabic{table}} 

					  
\usepackage[flushleft]{threeparttable} % to set attractive footnotes within table environments
\usepackage{titleref} % to allow cross-referencing by title
\usepackage{xr} % to allow cross-referencing between files
\usepackage{colortbl} % to allow the use of color/shading in tables
\usepackage{caption} % to set the appearance of captions
\captionsetup[table]{singlelinecheck=off,labelfont={sf,bf,small},font={sf,bf,small}}
\captionsetup[figure]{labelfont={sf,bf,small},font={sf,bf,small}}
\captionsetup[lstlisting]{labelfont={sf,bf,small},font={sf,bf,small}}
\usepackage{tocloft-hacked-PearsonGeneric-ROMEO} % to allow manipulation of the TOC
\frenchspacing

%%%%%%%%%% Creating C++xx box in the outside margin
%\usepackage{chngpage} %% no longer being used. 
%%%%%%%%%%%



%%%%%%%% Determine your indexing plan.
%
% Most of the time, the publisher will hire an independent indexing expert to create an
%    index for your book.  Your production editor can let you know the plan for your book.
% Use the line below only if your production plan includes the creation of a LaTeX index.
% Note that this situation is uncommon.
%\makeindex           % if your book will include a LaTeX-generated index
%\usepackage{See-makeidx}

%%%%%%%%%% These lines set up the Preamble of the document. You can skip over this part.
%% Preamble:
\input{definitions-PearsonGeneric-ROMEO}  % Loading the definitions needed for this book:



% Required for PANDOC conversion
\newcommand{\passthrough}[1]{#1}
%
%% Hack to allow PANDOC to parse Markdown in inline LaTeX environments
\let\Begin\begin
\let\End\end

% PANDOC stuff
%\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
%\IfFileExists{microtype.sty}{% use microtype if available
%  \usepackage[]{microtype}
%  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
%}{}
%\makeatletter
%\@ifundefined{KOMAClassName}{% if non-KOMA class
%  \IfFileExists{parskip.sty}{%
%    \usepackage{parskip}
%  }{% else
%    \setlength{\parindent}{0pt}
%    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
%}{% if KOMA class
%  \KOMAoptions{parskip=half}}
%\makeatother
%\usepackage{xcolor}
% \IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available

% \IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
% \hypersetup{
% % % % % % %   hidelinks,
% %   pdfcreator={LaTeX via pandoc}}


% \urlstyle{same} % disable monospaced font for URLs


% 
% 


%\setlength{\emergencystretch}{3em} % prevent overfull lines
%\providecommand{\tightlist}{%
%\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% 




%%%%%%%%% Now the document begins

\begin{document}
\input{cft-definitions-PearsonGeneric-ROMEO} % Loading a few commands related to the tocloft package



\renewcommand{\thelstlisting}{\arabic{lstlisting}}  %%% Romeo - reset listings per section

%%%%%%%%%%% Creating C++xx box in the outside margin  -- no longer being used
%\newcommand{\Cbox}{%\checkoddpage
%\ifcpoddpage\begin{marginpar}
%{{\hspace*{.5em}\color{forestgreen}\fbox{\sfb\cppxx}}}
%\end{marginpar}
%\else\begin{marginpar}
%{{\hspace{-4.25em}\color{forestgreen}\fbox{\sfb\cppxx}}} 
%\end{marginpar}\fi}
%%%%%%%%%%%%%%%%%%%%%%%%%


%%%%% The front matter begins:
\pagenumbering{roman}             % Roman numbering
\setcounter{page}{1}                    % Starting page number (specified by the publisher)
\cleardoublepage                         % This command is defined in our documentclass file. It tells 
                                                      % our compiler that we want the next item 
                                                       % to start on a right-hand page, and it inserts a blank left-hand 
                                                       % page if needed.    
\include{half-title}                        % The half-title page
%\include{series}                             % A placeholder for the series page. The publisher normally 
%                                                       % creates this page and just adds it into the final PDF. 
\cleardoublepage
\include{title}                               % The title page
\include{CIP}                                % The cataloging-in-publication page
\include{dedication}                      % The dedication page
\cleardoublepage
\parskip .5ex                       % Add space between Contents items
\tableofcontents                  % Make the Table of Contents 
%\input{EMCS-testfile-replacetoc}
%\input{EMCS-testfileX.tex.toc}  % For testing Slava's magic toc fix
\cleardoublepage                
%\parskip 0in                         % Reset to zero interpar spacing
\setlength{\parindent}{0pt}  %% ROMEO
\parskip 1ex  %%%% ROMEO
%\include{foreword}               % Add foreword
\include{preface}                 % Add preface 
\include{ack}                        % Add acknowledgements 
\include{author-LakosRomeo}                   % Add about the author page
\cleardoublepage                  
%%%%%%%The front matter ends

\pagenumbering{arabic}		  % Arabic numbering
%%\include{part1}            % Part I
\cleardoublepage
%\addtocontents{\makeatletter\renewcommand{\cftsubsecindent}{8em}\makeatother} % placement here actually puts the command just before Ch1 in toc file
\include{Ch0}  % Chapter 0
\cleardoublepage

%%%%%% RHs redefined for Chs 1-3
%\fancyhead[RO]{\sectionmark}
\fancyhead[LO]{\sfelevenRomeo Section~\thechapter.\thecppxx\hspace*{1em}\cppxx} 
%\fancyhead[RE]{\sectionmark}
%\fancyhead[LE]{\chaptermark}
%%%%%%%%%%
%\addtocontents{toc}{\protect{\protect\setlength{\cftsecindent}{4em}}}
\include{Ch1-testfile}  % Chapter 1
\cleardoublepage
\include{Ch2}  % Chapter 2
\cleardoublepage
%\addtocontents{toc}{\protect\renewcommand\cftsecindent{1.25em}} %%%%%
%\addtocontents{toc}{\protect\renewcommand*\protect\cftsubsecindent{4em}}
\include{Ch3}  % Chapter 3
\cleardoublepage

%
%%%%%% RHs revert for Ch 4 + BM
\fancyhead[LO]{}
%\renewcommand{\sectionmark}[1]{\markright{{\sfnine\thesection\ #1}}}
%\renewcommand{\chaptermark}[1]{\markboth{{\sfb\thechapter\quad {\sfb #1}}}{}}
%%%%%%%%%%
\include{Ch4}  % Chapter 4
\cleardoublepage
%
%
\cleardoublepage
%\bibliographystyle{ieeetr-hacked}
\bibliographystyle{lakos}
%\bibliographystyle{abstract}
\bibliography{emcs}
\nocite{*}
%\include{EMCS-bib}

\cleardoublepage
\include{glossary-test2}
%
\cleardoublepage
\include{index}

% 
% %
% 
% 
\end{document}
